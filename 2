
Для избежания превышения памяти при загрузки файла можно увеличить лимит памяти с помощью ini_set.
Но предпочтительнее будет использование функций. fopen и fgetcsv. fgetcsv позволяет читать CSV-файл по одной строке за раз и обрабатывать ее немедленно, что помогает контролировать использование памяти.

Также можно использовать генераторы

Пример использования функицй fopen и fgetcsv:

<?php

$file = fopen('large_file.csv', 'r');

while (($data = fgetcsv($file, 0, ',')) !== FALSE) {
    // Обрабатываем данные из строки $data
}

fclose($file);
